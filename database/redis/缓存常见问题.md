redis中问题

(一)、缓存穿透：

问题产生原因：外部恶意攻击，如：恶意攻击者使用不存在的用户ID频繁请求接口，导致缓存查找不命中。这时会有大量请求穿透缓存访问DB。

> 解决思路：

1、使用**BloomFilter**

2、对**不存在**的用户创建一个空对象，但有时会生成大量的空对象（不推荐）

(二)、缓存击穿：

问题产生原因：某个**热点数据**失效，大量针对该热点数据的请求直接访问DB。

>  解决思路：

1、可以使用**互斥锁**更新，保证同一进程内访问DB的请求只有一个。

2、失效时随机**sleep**一个很短的时间，再次查询，如果失败再执行更新。

3、针对多个热点key，可以在缓存时使用固定时间加上一个小的随机数，避免大量热点key同一时刻失效。

(三)、缓存雪崩：

问题原因：**缓存**挂掉，所有请求直接访问DB

> 解决思路：

1、使用快速失败的熔断策略，减少DB的瞬间压力

2、使用主从的集群模式尽量保证缓存服务的高可用